\documentclass[12pt,letterpaper]{article}
\usepackage{graphicx,textcomp}
\usepackage{natbib}
\usepackage{setspace}
\usepackage{fullpage}
\usepackage{color}
\usepackage[reqno]{amsmath}
\usepackage{amsthm}
\usepackage{fancyvrb}
\usepackage{amssymb,enumerate}
\usepackage[all]{xy}
\usepackage{endnotes}
\usepackage{lscape}
\newtheorem{com}{Comment}
\usepackage{float}
\usepackage{hyperref}
\newtheorem{lem} {Lemma}
\newtheorem{prop}{Proposition}
\newtheorem{thm}{Theorem}
\newtheorem{defn}{Definition}
\newtheorem{cor}{Corollary}
\newtheorem{obs}{Observation}
\usepackage[compact]{titlesec}
\usepackage{dcolumn}
\usepackage{tikz}
\usetikzlibrary{arrows}
\usepackage{multirow}
\usepackage{xcolor}
\newcolumntype{.}{D{.}{.}{-1}}
\newcolumntype{d}[1]{D{.}{.}{#1}}
\definecolor{light-gray}{gray}{0.65}
\usepackage{url}
\usepackage{listings}
\usepackage{color}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2
}
\lstset{style=mystyle}
\newcommand{\Sref}[1]{Section~\ref{#1}}
\newtheorem{hyp}{Hypothesis}

\title{Problem Set 3 Answers}
\date{Vanessa Wong}
\author{QTM 200: Applied Regression Analysis}

\begin{document}
	\maketitle
	\section*{Instructions}
	\begin{itemize}
		\item Please show your work! You may lose points by simply writing in the answer. If the problem requires you to execute commands in \texttt{R}, please include the code you used to get your answers. Please also include the \texttt{.R} file that contains your code. If you are not sure if work needs to be shown for a particular problem, please ask.
		\item Your homework should be submitted electronically on the course GitHub page in \texttt{.pdf} form.
		\item This problem set is due at the beginning of class on Monday, February 17, 2020. No late assignments will be accepted.
		\item Total available points for this homework is 100.
	\end{itemize}
	
		\vspace{.25cm}
	
\noindent In this problem set, you will run several regressions and create an add variable plot (see the lecture slides) in \texttt{R} using the \texttt{incumbents\_subset.csv} dataset. Include all of your code.

	\vspace{.5cm}
\section*{Question 1 (20 points)}
\vspace{.25cm}
\noindent We are interested in knowing how the difference in campaign spending between incumbent and challenger affects the incumbent's vote share. 
	\begin{enumerate}
		\item Run a regression where the outcome variable is \texttt{voteshare} and the explanatory variable is \texttt{difflog}.	
		\item[] Linear model: y = 0.5790 + 0.0417x
		\lstinputlisting[language=R, firstline=39, lastline=61]{PS3_answers3.R}
		\vspace{1cm}
		\item Make a scatterplot of the two variables and add the regression line. 
		\begin{itemize}
			\item []
		\includegraphics[width=0.5\textwidth]{Rplot.png}
		\end{itemize}
		\lstinputlisting[language=R, firstline=64, lastline=66]{PS3_answers3.R}
		\vspace{1cm}
		\item Save the residuals of the model in a separate object.	\vspace{1cm}
		\lstinputlisting[language=R, firstline=69, lastline=70]{PS3_answers3.R}
		\item Write the prediction equation.
		\item[]
		$$\hat{y} = 0.5790 + 0.0417x$$
	\end{enumerate}
	
\newpage

\section*{Question 2 (20 points)}
\noindent We are interested in knowing how the difference between incumbent and challenger's spending and the vote share of the presidential candidate of the incumbent's party are related.	\vspace{.25cm}
	\begin{enumerate}
		\item Run a regression where the outcome variable is \texttt{presvote} and the explanatory variable is \texttt{difflog}.	\vspace{1cm}
		\item[] Linear model: y = 0.5076 + 0.0238x
		\lstinputlisting[language=R, firstline=82, lastline=95]{PS3_answers3.R}
		\item Make a scatterplot of the two variables and add the regression line.
		\item[]
		\includegraphics[width=0.5\textwidth]{Q2.png}
		\lstinputlisting[language=R, firstline=98, lastline=100]{PS3_answers3.R}
		\item Save the residuals of the model in a separate object.	\vspace{1cm}
		\lstinputlisting[language=R, firstline=103, lastline=104]{PS3_answers3.R}
		\item Write the prediction equation.
		\item[] $$\hat{y} = 0.5076 + 0.0238x$$
	\end{enumerate}
	
	\newpage	
\section*{Question 3 (20 points)}

\noindent We are interested in knowing how the vote share of the presidential candidate of the incumbent's party is associated with the incumbent's electoral success.
	\vspace{.25cm}
	\begin{enumerate}
		\item Run a regression where the outcome variable is \texttt{voteshare} and the explanatory variable is \texttt{presvote}.
			\vspace{0.25cm}
			\item[] Linear model: y= 0.4413 + 0.3880x
			\lstinputlisting[language=R, firstline=115, lastline= 133]{PS3_answers3.R}
		\item Make a scatterplot of the two variables and add the regression line. 
			\item[]
			\includegraphics[width=0.5\textwidth]{Q3.png}
			\lstinputlisting[language=R, firstline=136, lastline=138]{PS3_answers3.R}
		\item Write the prediction equation.
		\item[] $$\hat{y} = 0.4413 + 0.3880x$$
	\end{enumerate}
	

\newpage	
\section*{Question 4 (20 points)}
\noindent The residuals from part (a) tell us how much of the variation in \texttt{voteshare} is $not$ explained by the difference in spending between incumbent and challenger. The residuals in part (b) tell us how much of the variation in \texttt{presvote} is $not$ explained by the difference in spending between incumbent and challenger in the district.
	\begin{enumerate}
		\item Run a regression where the outcome variable is the residuals from Question 1 and the explanatory variable is the residuals from Question 2.
		\item[] Linear model: y = -4.860 x $10^{-18} + 0.2569x$
		\lstinputlisting[language=R, firstline=149, lastline=168]{PS3_answers3.R}
		\item Make a scatterplot of the two residuals and add the regression line.
		\item[]
		\includegraphics[width=0.5\textwidth]{Q4.png}
		\lstinputlisting[language=R, firstline=171, lastline=173]{PS3_answers3.R}
		\item Write the prediction equation.
		\item[] $\hat{y}$ = -4.860 x $10^{-18} + 0.2569x$

	\end{enumerate}
	
\section*{Question 5 (20 points)}
\noindent What if the incumbent's vote share is affected by both the president's popularity and the difference in spending between incumbent and challenger? 
	\begin{enumerate}
		\item Run a regression where the outcome variable is the incumbent's \texttt{voteshare} and the explanatory variables are \texttt{difflog} and \texttt{presvote}.	
		\item[] 
		\lstinputlisting[language=R, firstline=187, lastline=204]{PS3_answers3.R}
		\item Write the prediction equation.	
		\item[] $$\hat{y} = 0.4486 + 0.0355x_{difflog} + 0.2569x_{presvote}$$
		\item What is it in this output that is identical to the output in Question 4? Why do you think this is the case?	
		\item[] Aswered in tex file
	%	\item Reflect on your finding. Don't write anything. Just think about it. # the slope of the regression of voteshare on presvote is the same as the slope of of the regression of Q1 residuals on Q2 residuals. i think this is the case because the regression of Q1 residuals on Q2 residuals tells us how much variation in presvote *and* voteshare is not explained by difflog. in both cases, the slopes describe the relationship between voteshare and presvote, while holding difflog constant. As such, they have the same slope.  
	\end{enumerate}

\begin{itemize}
\item[NOTE:] The final R file with answers is called PS3\_answers4. I had to resave the file multiple times because I was making changes to the R file as I was compiling.
\end{itemize}
\lstinputlisting{PS3_answers4.R}
\end{document}
